# 互联网

> 数据包（Packet）想在互联网上传输要符合“互联网协议”的标准，简称IP

## 数据包

> 数据包的组成
> IP HEADER|DATA PAYLOAD组成的:PACKET(数据包)
> IP HEADER: 头部存“关于数据的数据”也叫元数据（metadata）

| 组成               | 描述     |
| -------------------- | -------- |
| IP HEADER           | 头部存“关于数据的数据”也叫元数据（metadata） |
| DATA PAYLOAD           | 存储的数据 |

> 这意味着当数据包到达对方电脑对方不知道把包交给哪个程序，是交给Skype还是使命召唤？
> 因此需要在IP之上，开发更高级的协议。

### UPD
>
> 这些协议里，最简单最常见的叫“用户数据报协议”，简称UPD。

| 主要部分               | 组成     |
| -------------------- | -------- |
| IP HEADER           | 头部存“关于数据的数据”也叫元数据（metadata） |
|  DATA PAYLOAD          | UDP HEADER 和 DATA |

> UDP中的包含信息为: PORT(端口号), 检查数据是否正确(CHECKSUM),
> 检查数据的正确性是把数据求和来对比的.
> UDP 头部包含有用的信息: 信息之一的是端口号.
> 每个想访问网络的程序,都要向操作系统申请一个端口号.
> 使用UDP 头部的端口号信息匹配对应的运行的程序

### TCP
>
> 描述:传输控制协议
> 组成部分和UDP类似
> 所以又称为:TCP/IP协议
> 就像UDP,TCP头部也有"端口号"和"校验和"
> 但有更多的额外功能
> 例如:

1. TCP数据包有序号:15号之后是16号,16号之后是17号,以此类推,序号使接收方可以把数据包排成正确顺序,即使到达时间不同.
2. TCP要求接收方的电脑接收到数据包并且"校验和"检查无误后(数据没有损坏)给发送方一个确认码,代表收到了."确认码"简称ACK得知上一个数据包成功抵达后,发送方会发送下一个数据包.假设这次发出去之后,没收到确认码,那么肯定哪里错了,如果过了一定时间还没收到确认码,发送方会再发一次,注意,数据包可能的确到了,只是确认码延误了很久,或传输中丢失了,但这不碍事,因为接收方有序号
3.

| 主要部分               | 组成     |
| -------------------- | -------- |
| IP HEADER           | 头部存“关于数据的数据”也叫元数据（metadata） |
|  DATA PAYLOAD          | TCP HEADER 和 DATA |

### 总结
>
> IP负责把数据包送到正确的计算机,UPD负责把数据包送到正确的程序.
> UDP不提供数据包错误重发机制,接收方知道数据损坏后,一般只是扔掉.
> 而且,UDP无法得知数据包是否到达,发送方无法知道数据包是否正确发送成功.
> 但是很多程序并不在意这一点,因为UDP又简单又快.
> 例如: 在线视频都会用到UDP传输,
> 但对于其它的一些数据,这个方法并不适用.
> 例如:邮件
> 如果"所有数据必须到达"就用"传输控制协议",简称TCP

# https技术鉴赏
>
> 很早之前的http都是以明文进行数据的传输
> 而新出的http s是以密文传输，其中的s代表着安全，当然是加密之后再进行传输的。

### 对称密钥
>
> 传输者必须和接收者使用的同一个密钥，具有对称性，也称为对称密钥（互为逆向过程）。

### 非对称加密
>
> 非对称加密是一个和对称密钥相呼应的概念，而非对称加密又是成对出现的，又称为公钥和私钥，
> 用公钥加密的数据只能被私钥解密，公钥也无法进行解密。
> 同样，私钥加密的数据只能被公钥解密，私钥也无法进行解密。
> 也就是说加密并不对称。

### 传递过程
>
> 服务器先把自己的公钥传递给浏览器，浏览器生成随机数据，用浏览器的公钥进行加密，然后服务器再用自己的私钥进行解密。
> 如此双方都得到了同样的随机数据。
> 这个随机数据就可以作为对称加密的密钥，对真正的密钥进行加密传输。
> SSL大概的过程
> 对服务器发送请求，然后服务器接收请求，服务器发送公钥，然后浏览器生成对应公钥用服务器公钥对其加密然后给到服务器，然后使用对称加密进行互相通信。

> 以上被称为 (安全套接字层) Secure Sokect Layer
> 而这个密钥协商的过程也被称之为SSL握手
> 而在这期间的过程，SSL又经历了 1994(1.0) -> 1995(2.0) -> 1996(3.0)版本的改进 -> 1999(3.1)TLS又被称为SSL3.1版本
> 最终被标准化为TLS这个新的称呼发布

### 其中的问题
>
> 如果服务器在想浏览器发送公钥的过程中被第三方劫持替换成第三方的公钥发送给了浏览器。
> 浏览器收到后无法知道当前收到的公钥是否是服务器发送的公钥，仍然作为后续对称加密公钥的随机数据。
> 第三方收到后，因为是自己的公钥所以可以用自己的私钥进行解密得到明文，然后再其用服务器的公钥进行加密发送给服务器，服务器用自己的私钥进行解密。
> 第三方就像是一个黑中介一样，俩头骗，这要传输俩边都建立了的对称密钥的通信，但第三方也有了密钥。
> 问题的根本在于（公钥并不能表明自己属于谁）所以解决的方式是让其具有表明身份的能力

> 所以服务器拿着自己的公钥和域名等等信息，找到第三方机构（CA），该机构也有自己的公私钥，用自己的私钥对其进行加密，得到一串密文，被称之为签名，然后把签名数据和原始明文放在一起，然后发送给管理员（TLS整数）。
> 然后服务器传输的不是自己的公钥，而是能表明自己的证书，浏览器拿到证书之后而是选择进行验证，而不是直接相信。拿CA机构公开的公钥对整数中的密文进行解密，如果解密的结果和证书中的明文一致，通过验证。
> 然后从证书中提取公钥对随机数据进行加密，然后发送给服务器，双方协商出对称密钥。
> 如果结果不一致，那么浏览器的风险提示就出现了。

> 信任哪些CA证书（浏览器内置）

## 计算机网络和因特网

### 网络
>
> 网络是一系列可用于通信的设备相互链接构成的。

1. 局域网：局域网通常是与单个办公室，建筑或校园内的几台主机相连的私有网络。
2. 广域网：广域网也是通信设备互联构成的。但是广域网与局域网之间有一些差别。局域网的大小通常收到限制，跨越一个办公室，一座大楼；而广域网的地理跨度更大，可以横跨一座城市，一个州，一个国家。

### 描述
>
> 局域网将主机互联，广域网则将交换机，路由器或调剂解调器之类的链接设备互链。
> 通常，局域网为机构私有，广域网则由通信公司创建并运营，并且租给使用它的机构。
> 俩种连接形式：点对点广域网，交换广域网。

### 点对点广域网
>
> 点对点广域网通过传输媒介（电缆或无线）连接俩个通信设备的网络。
> 交换广域网是一个有至少俩个端的网络。交换广域网用于当今全球通信的骨干网。也可以说：交换网是几个点对点广域网通过开关链接产生的结合体。

### 互联网络

> 如今，很难看见独立存在的局域网和广域网，它们现在都是互相连接。当俩个或多个网络互相连接时，它们构成一个互联网络，或者说是国际网（internet）。

## 因特网
>
> 最值得注意的网际网是因特网（Internet）,它是由成千上万的互联网络组成。

### 描述结构
>
> 在顶层，骨干网为通信公司所拥有，这些骨干网通过一些复杂的交换系统相互连接（被称为网络对等交汇点）。
> 在第二层，有一些规模较小的网络，这些网络被称为供应商网络，它们付费使用骨干网上的一些服务。这些供应商网络与骨干网相连接，有时也连接其它供应商网络。
> 在因特网的边缘有一些真正使用基于因特网的服务的网络，这些网络是客户网络。
> 骨干网和供应商网络也被称为因特网服务供应商(ISP),骨干网通常被称为国际因特网服务供应商。
> 供应商网络也被称为国内或是区域服务供应商。

## 协议

## 协议分层
>
> 协议定义了发送器，接收器以及所有中间设备必须遵守予以保证有效地通信的规则。简单的通信可能只需要一条简单的协议，当通信变得复杂时，可能需要将任务分配到不同的协议层中，在这种情况下，我们在每一个协议层都需要一个协议，或者协议分层。

### 协议分层原则
>
> 第一条原则规定，如果我们想达到双向通信，就需要保证每一个协议层都可而已进行俩个对立且方向相反的工作。
> 例如：第三协议层的曾公是去听（在一个方向上）和说（在另一个方向上），第二协议层同时需要能够进行加密和解密工作，第一协议层需要发送和接收邮件。
> 第二条重要原则是在俩个站点中每一层的俩个对象必须完全相同，例如，在俩个站点中第三层的对象都应该是明文信件，而在俩个站点中二层的对象都应该是密文新建，在第一层都是一封信。

### 逻辑连接

第三层：听/说 < --- > 听/说
第二层：加密/解密 < --- > 加密/解密
第一层：寄信/收信 < --- > 寄信/收信

### TCP/IP协议族(传输控制协议/网际协议)

> 如今因特网中使用的协议集（一组通过不同分层进行组织的协议）被称为TCP/IP协议族。
> TCP/IP协议族是一个分层协议，它由提供特定功能的交互式模块组成。分层这个属于说明每一个高层协议都基于一个或多个底层协议提供的服务。

### 分层

1. 应用层 （第五层）
2. 传输层（第四层）
3. 网络层（第三层）
4. 数据链路层（第二层）
5. 物理层（第一层）

### 分层架构

> 为了展示TCP/IP协议族中的分层式如何在俩台主机通信中作用的，假设要使用的一套东西在一个由3个LAN（链接）构成的小网络中，且链路层交换机与每个LAN（链接）相连。

源（PC）：

1. 应用层
2. 传输层
3. 网络层
4. 数据链路层
5. 物理层

交换机：一对一关系

1. 数据链路层
2. 物理层

路由：
> 除了网络层是单层，其它层数据链路层包含物理层是多对多关系

1. 网络层
2. 数据链路层
3. 物理层
