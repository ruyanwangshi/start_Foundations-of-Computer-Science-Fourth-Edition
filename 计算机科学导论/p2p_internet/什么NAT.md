# 什么是NAT
>
> NAT(Network Address Translation,网络地址转换)是一种在计算机网络中广泛使用的技术，用于将私有IP地址转为公共IP地址以便在Internet上进行通信。在一个局域网（LAN）中，每台计算机都有一个唯一的私有IP地址，但是在Internet上，只有公共IP地址才能被路由器和其他设备识别和路由。因此，NAT技术被用来解决这个问题，允许多个计算机通过一个公共IP地址访问Internet。

> NAT通过路由器或防火墙上创建一个网络地址转换表来实现这一点，该表记录了局域网中每台计算机的私有IP地址和与之关联的公共IP地址。当计算机发送数据包到Internet时，路由器会将源IP地址转换为与该计算机相关联的公共IP地址，并在转发响应数据包时将目标IP地址替换为响应的私有IP地址。这种技术有效地隐藏了网络内部的细节，同时允许多个计算机使用一个公共IP地址访问Internet。

### 路由器
>
> 路由器通过路由表来确定如何转发公网和内网的数据。路由表时路由器使用的一张表格，其中包含了路由器所知道的目标网络地址和它们对应的下一跳路由器或出口接口。
> 当路由器接收到一个数据包时，它会找路由表，以确定如何将数据包转发。如果数据包的目标地址就是本地网络上的主机，则路由器将数据包转发到该主机。否则，路由器将查找路由表，已找到与目标地址最匹配的路由。
> 如果目标地址是另一个网络上的地址，则路由器将使用吓一跳路由器或出口接口来将数据包转发到该网络，如果路由表中没有匹配的路由，则路由器将丢弃该数据包或捡起发送到默认的路由器。
> 在啊转发数据包时，路由器还可以使用各种技术来提高网络性能和安全性，例如路由选择协议、网络地址转换（NAT）和防火墙。

### 多路复用
> 多路复用是一种技术，可以在单个信道上同时传输多个数据流。它允许多个信号同时通过一个物理通道传输，以提高同信息信道的利用率。
> 在计算机网络中，多路复用通常指将多个网络连接合并为一个连接，从而提高网络传输的效率。例如：HTTP/2和SPDY使用多路复用将多个HTTP请求和响应同时发送到服务器和客户之前的单个TCP连接中。
> 在电信领域，多路复用可以将多个电话信号合并到一个信道中传输，以节省电话线路的成本。此外，多路复用还被用于数字电视和卫星通信等领域，以提高信道的利用率。
> 总之，多路复用是一种将多个信号合并到一个信道中传输的技术，可以提高通信信道的利用率，从而实现更高的效率和更好的性能。

- 概述

> 互联网由无数网络组成，通过基础传输协议绑定到共享地址空间中。
> 当流量在网络边界之间移动时，通常会发生称为网络地址转换的过程。网络地址转换（NAT）将地址从一个地址空间映射到另一个地址空间。
> NAT允许许多机器共享一个公共地址，这对IPv4协议的支持运行至关重要，否则IPv32协议将无法满足具有32-bit未地址空间的现在网络的需求。
> 例如：
> 当我连接家庭wifi时，我的计算机获得的IPv4的地址。这是保留内部网络使用的IP地址。当我与公共IP地址建立传输连接时，路由器会将传输的内部地址替换为自己的公网IP地址。如果数据从公网端返回的时候，路由器将转会内部地址。
> 虽然NAT通常对传输连接时透明的，但侦听传入连接需要一些配置。路由器侦听单个公共IP地址，但内部网络上任意数量的计算机都可以处理该请求。为了处理请求，路由器必须配置将某些流量发送到特定计算机，通常时通过将一个或多个TCP或UDP端口从公共IP映射到内部IP来。
